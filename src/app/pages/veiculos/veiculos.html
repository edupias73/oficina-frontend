<div class="page-container">
  <div class="page-toolbar">
    <div class="toolbar-left">
      <h1>Frota de Ve√≠culos</h1>
      <p>Gerencie os carros cadastrados na oficina.</p>
    </div>
    <div class="toolbar-actions">
      <div class="search-box">
        <span class="icon">üîç</span>
        <input type="text" [(ngModel)]="termoBusca" (input)="filtrarVeiculos()" placeholder="Buscar placa, modelo ou dono..." />
      </div>
      <button class="btn-primary" (click)="abrirModalCadastro()">
        <span class="icon">+</span> Novo Ve√≠culo
      </button>
    </div>
  </div>

  <div class="content-area">
    <div class="card-table">
      <table>
        <thead>
          <tr>
            <th>Ve√≠culo</th>
            <th>Placa</th>
            <th>Cor</th>
            <th>Dono (Cliente)</th>
            <th class="text-right">A√ß√µes</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let v of listaVeiculos">
            <td class="fw-bold">{{ v.modelo }} <small class="text-muted">({{ v.ano }})</small></td>
            <td><span class="badge-placa">{{ v.placa }}</span></td>
            <td>{{ v.cor }}</td>
            <td>{{ v.cliente?.nome || '---' }}</td>
            <td class="actions-cell">
              <button class="btn-icon edit" (click)="abrirModalEdicao(v)">‚úèÔ∏è</button>
              <button class="btn-icon delete" (click)="excluirVeiculo(v.id)">üóëÔ∏è</button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

<div class="modal-overlay" *ngIf="modalCadastroAberto">
  <div class="modal-papel modal-cadastro">
    <div class="modal-header">
      <h2>Novo Ve√≠culo</h2>
      <button class="btn-fechar" (click)="fecharModalCadastro()">‚úñ</button>
    </div>
    <div class="form-grid">
      <div class="grupo-form full-width">
        <label>Dono do Carro *</label>
        <select [(ngModel)]="dadosNovoVeiculo.clienteId" class="input-padrao">
          <option [ngValue]="null">Selecione o cliente...</option>
          <option *ngFor="let c of listaClientes" [ngValue]="c.id">{{ c.nome }} ({{ c.documento }})</option>
        </select>
      </div>
      <div class="grupo-form">
        <label>Marca</label>
        <input type="text" [(ngModel)]="dadosNovoVeiculo.marca" class="input-padrao" placeholder="Honda">
      </div>
      <div class="grupo-form">
        <label>Modelo</label>
        <input type="text" [(ngModel)]="dadosNovoVeiculo.modelo" class="input-padrao" placeholder="Civic">
      </div>
      <div class="grupo-form">
        <label>Placa *</label>
        <input type="text" [(ngModel)]="dadosNovoVeiculo.placa" class="input-padrao" placeholder="ABC-1234">
      </div>
      <div class="grupo-form">
        <label>Cor</label>
        <input type="text" [(ngModel)]="dadosNovoVeiculo.cor" class="input-padrao">
      </div>
    </div>
    <div class="modal-actions">
      <button class="btn-cancelar" (click)="fecharModalCadastro()">Cancelar</button>
      <button class="btn-salvar" (click)="salvarNovoVeiculo()">üíæ Salvar</button>
    </div>
  </div>
</div>

<div class="modal-overlay" *ngIf="modalEdicaoAberto">
  <div class="modal-papel modal-cadastro">
    <div class="modal-header">
      <h2>Editar Ve√≠culo</h2>
      <button class="btn-fechar" (click)="fecharModalEdicao()">‚úñ</button>
    </div>
    <div class="form-grid">
      <div class="grupo-form full-width">
        <label>Dono</label>
        <select [(ngModel)]="veiculoEmEdicao.clienteId" class="input-padrao">
          <option *ngFor="let c of listaClientes" [ngValue]="c.id">{{ c.nome }}</option>
        </select>
      </div>
      <div class="grupo-form"><label>Modelo</label><input [(ngModel)]="veiculoEmEdicao.modelo" class="input-padrao"></div>
      <div class="grupo-form"><label>Placa</label><input [(ngModel)]="veiculoEmEdicao.placa" class="input-padrao"></div>
    </div>
    <div class="modal-actions">
      <button class="btn-cancelar" (click)="fecharModalEdicao()">Cancelar</button>
      <button class="btn-salvar" (click)="salvarEdicao()">üîÑ Atualizar</button>
    </div>
  </div>
</div>